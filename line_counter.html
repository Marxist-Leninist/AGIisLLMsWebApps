<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Line Counter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* General Styles */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* Header Styles */
        header {
            background-color: #aa0000;
            color: #fff;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            margin: 0;
            font-size: 2em;
        }

        /* Main Content Styles */
        main {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .controls {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
        }

        .stats {
            font-size: 1.1em;
            color: #aa0000;
            font-weight: bold;
        }

        .stats div {
            margin-right: 15px;
        }

        .buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .buttons button {
            padding: 10px 15px;
            font-size: 1em;
            background-color: #aa0000;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .buttons button:hover {
            background-color: #cc0000;
        }

        label {
            font-size: 1.2em;
            display: block;
            margin-bottom: 10px;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        /* Footer Styles */
        footer {
            background-color: #aa0000;
            color: #fff;
            text-align: center;
            padding: 15px 0;
            position: relative;
            width: 100%;
            bottom: 0;
            margin-top: 40px;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            header h1 {
                font-size: 1.5em;
            }

            .stats {
                font-size: 1em;
            }

            .controls {
                flex-direction: column;
                align-items: flex-start;
            }

            .buttons {
                flex-direction: column;
                align-items: stretch;
                width: 100%;
            }

            .buttons button {
                width: 100%;
            }

            textarea {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Line Counter</h1>
    </header>

    <main>
        <div class="controls">
            <div class="stats" id="stats">
                <div id="line-count">Lines: 0</div>
                <div id="word-count">Words: 0</div>
                <div id="char-count">Characters: 0</div>
                <div id="read-time">Estimated Reading Time: 0 min</div>
            </div>
            <div class="buttons">
                <button id="copy-counts">Copy Counts</button>
                <button id="export-report">Export Report</button>
                <button id="play-text">Play Text</button>
                <button id="stop-text">Stop</button>
            </div>
        </div>

        <label for="text-input">Enter your text below:</label>
        <textarea id="text-input" placeholder="Type or paste your text here..."></textarea>
    </main>

    <footer>
        &copy; <span id="current-year"></span> Marxist-Leninist
    </footer>

    <script>
        // Update the current year in the footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        const textarea = document.getElementById('text-input');
        const lineCountDisplay = document.getElementById('line-count');
        const wordCountDisplay = document.getElementById('word-count');
        const charCountDisplay = document.getElementById('char-count');
        const readTimeDisplay = document.getElementById('read-time');
        const copyCountsBtn = document.getElementById('copy-counts');
        const exportReportBtn = document.getElementById('export-report');
        const playTextBtn = document.getElementById('play-text');
        const stopTextBtn = document.getElementById('stop-text');

        let utterance;

        function updateCounts() {
            const text = textarea.value;
            const lines = text === '' ? [] : text.split(/\r\n|\r|\n/);
            const words = text.trim().split(/\s+/).filter(word => word.length > 0 && word !== '');
            const chars = text.length;
            const readTime = Math.ceil(words.length / 200); // Average reading speed: 200 WPM

            lineCountDisplay.textContent = `Lines: ${lines.length}`;
            wordCountDisplay.textContent = `Words: ${words.length}`;
            charCountDisplay.textContent = `Characters: ${chars}`;
            readTimeDisplay.textContent = `Estimated Reading Time: ${readTime} min`;
        }

        textarea.addEventListener('input', updateCounts);

        copyCountsBtn.addEventListener('click', () => {
            const countsText = `Lines: ${lineCountDisplay.textContent.split(': ')[1]}
Words: ${wordCountDisplay.textContent.split(': ')[1]}
Characters: ${charCountDisplay.textContent.split(': ')[1]}
Estimated Reading Time: ${readTimeDisplay.textContent.split(': ')[1]}`;
            navigator.clipboard.writeText(countsText)
                .then(() => {
                    alert('Counts copied to clipboard!');
                })
                .catch(err => {
                    alert('Failed to copy counts.');
                });
        });

        exportReportBtn.addEventListener('click', () => {
            const text = textarea.value;
            const countsText = `Lines: ${lineCountDisplay.textContent.split(': ')[1]}
Words: ${wordCountDisplay.textContent.split(': ')[1]}
Characters: ${charCountDisplay.textContent.split(': ')[1]}
Estimated Reading Time: ${readTimeDisplay.textContent.split(': ')[1]}`;

            const report = `Text Analysis Report
---------------------
${countsText}

Text Content:
---------------------
${text}
`;

            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'text_analysis_report.txt';
            link.click();
            URL.revokeObjectURL(url);
        });

        playTextBtn.addEventListener('click', () => {
            if (utterance) {
                window.speechSynthesis.cancel();
            }
            utterance = new SpeechSynthesisUtterance(textarea.value);
            // Adjust volume between 0.0 and 1.0 (cannot go below device minimum)
            utterance.volume = 0.5;
            window.speechSynthesis.speak(utterance);
        });

        stopTextBtn.addEventListener('click', () => {
            if (utterance) {
                window.speechSynthesis.cancel();
            }
        });

        // Initialize counts on page load
        updateCounts();
    </script>
</body>
</html>
